/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/@fluentui/web-components@2.5.9/dist/esm/color/palette.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{clamp,ColorHSL,ColorLAB,ColorRGBA64,hslToRGB,interpolateRGB,labToRGB,rgbToHSL,rgbToLAB,roundToPrecisionSmall}from"@microsoft/fast-colors";import{isSwatchRGB,SwatchRGB}from"./swatch";import{binarySearch}from"./utilities/binary-search";import{directionByIsDark}from"./utilities/direction-by-is-dark";import{contrast}from"./utilities/relative-luminance";const defaultPaletteRGBOptions={stepContrast:1.03,stepContrastRamp:.03,preserveSource:!1};function create(e,t,r){return"number"==typeof e?PaletteRGB.from(SwatchRGB.create(e,t,r)):PaletteRGB.from(e)}function from(e,t){return isSwatchRGB(e)?PaletteRGBImpl.from(e,t):PaletteRGBImpl.from(SwatchRGB.create(e.r,e.g,e.b),t)}export const PaletteRGB=Object.freeze({create:create,from:from});class PaletteRGBImpl{constructor(e,t){this.closestIndexCache=new Map,this.source=e,this.swatches=t,this.reversedSwatches=Object.freeze([...this.swatches].reverse()),this.lastIndex=this.swatches.length-1}colorContrast(e,t,r,s){void 0===r&&(r=this.closestIndexOf(e));let o=this.swatches;const a=this.lastIndex;let n=r;void 0===s&&(s=directionByIsDark(e));return-1===s&&(o=this.reversedSwatches,n=a-n),binarySearch(o,(r=>contrast(e,r)>=t),n,a)}get(e){return this.swatches[e]||this.swatches[clamp(e,0,this.lastIndex)]}closestIndexOf(e){if(this.closestIndexCache.has(e.relativeLuminance))return this.closestIndexCache.get(e.relativeLuminance);let t=this.swatches.indexOf(e);if(-1!==t)return this.closestIndexCache.set(e.relativeLuminance,t),t;const r=this.swatches.reduce(((t,r)=>Math.abs(r.relativeLuminance-e.relativeLuminance)<Math.abs(t.relativeLuminance-e.relativeLuminance)?r:t));return t=this.swatches.indexOf(r),this.closestIndexCache.set(e.relativeLuminance,t),t}static saturationBump(e,t){const r=rgbToHSL(e).s,s=rgbToHSL(t);if(s.s<r){const e=new ColorHSL(s.h,r,s.l);return hslToRGB(e)}return t}static ramp(e){const t=e/100;return t>.5?(t-.5)/.5:2*t}static createHighResolutionPalette(e){const t=[],r=rgbToLAB(ColorRGBA64.fromObject(e).roundToPrecision(4)),s=labToRGB(new ColorLAB(0,r.a,r.b)).clamp().roundToPrecision(4),o=labToRGB(new ColorLAB(50,r.a,r.b)).clamp().roundToPrecision(4),a=labToRGB(new ColorLAB(100,r.a,r.b)).clamp().roundToPrecision(4),n=new ColorRGBA64(0,0,0),i=new ColorRGBA64(1,1,1),l=a.equalValue(i)?0:14,c=s.equalValue(n)?0:14;for(let e=100+l;e>=0-c;e-=.5){let r;if(e<0){r=interpolateRGB(e/c+1,n,s)}else if(e<=50)r=interpolateRGB(PaletteRGBImpl.ramp(e),s,o);else if(e<=100)r=interpolateRGB(PaletteRGBImpl.ramp(e),o,a);else{r=interpolateRGB((e-100)/l,a,i)}r=PaletteRGBImpl.saturationBump(o,r).roundToPrecision(4),t.push(SwatchRGB.from(r))}return new PaletteRGBImpl(e,t)}static adjustEnd(e,t,r,s){const o=-1===s?t.swatches:t.reversedSwatches,a=e=>{const r=t.closestIndexOf(e);return 1===s?t.lastIndex-r:r};1===s&&r.reverse();const n=e(r[r.length-2]);if(roundToPrecisionSmall(contrast(r[r.length-1],r[r.length-2]),2)<n){r.pop();const e=a(t.colorContrast(o[t.lastIndex],n,void 0,s))-a(r[r.length-2]);let i=1;for(let s=r.length-e-1;s<r.length;s++){const e=a(r[s]),n=s===r.length-1?t.lastIndex:e+i;r[s]=o[n],i++}}1===s&&r.reverse()}static createColorPaletteByContrast(e,t){const r=PaletteRGBImpl.createHighResolutionPalette(e),s=e=>{const r=t.stepContrast+t.stepContrast*(1-e.relativeLuminance)*t.stepContrastRamp;return roundToPrecisionSmall(r,2)},o=[];let a=t.preserveSource?e:r.swatches[0];o.push(a);do{const e=s(a);a=r.colorContrast(a,e,void 0,1),o.push(a)}while(a.relativeLuminance>0);if(t.preserveSource){a=e;do{const e=s(a);a=r.colorContrast(a,e,void 0,-1),o.unshift(a)}while(a.relativeLuminance<1)}return this.adjustEnd(s,r,o,-1),t.preserveSource&&this.adjustEnd(s,r,o,1),o}static from(e,t){const r=void 0===t?defaultPaletteRGBOptions:Object.assign(Object.assign({},defaultPaletteRGBOptions),t);return new PaletteRGBImpl(e,Object.freeze(PaletteRGBImpl.createColorPaletteByContrast(e,r)))}}
//# sourceMappingURL=/sm/0cc3a3be0c034e98e2e188895f0dd74861c505eedefbc1767e5b62b1bfdb86f2.map